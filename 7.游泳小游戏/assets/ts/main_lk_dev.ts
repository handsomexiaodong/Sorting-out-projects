(function () {
    //  console.log(22123333);
    class Mdbox5 {
        ruleAllArry: any;
        rule: any;
        constructor(i) {
            this.ruleAllArry = [
                {
                    ruleLeng: 10,
                    ruleStart: 0, // 数字的开始位置
                    ruleSize: 1, // 数字的长度
                    ruleSpostion: 2,
                    ruleStrNum: 3,
                    ruleArry: [
                        ["QUF", "3P7", "qsf", "0Md", "XNB", "CIU", "XwT", "F51", "IId", "3Z7"],
                        ["lEk", "N82", "b81", "Cbw", "U2g", "VIa", "yKC", "KGK", "JeZ", "GRp"],
                        ["Mx1", "5zj", "IYE", "vSg", "c2y", "AHE", "AjM", "TSF", "xWe", "W20"],
                        ["Biu", "c5b", "u0N", "4KX", "WO7", "AeU", "Hbf", "bcm", "vvy", "K56"],
                        ["Slf", "f7C", "Kan", "Mgr", "MyR", "esU", "GHB", "Tun", "b7s", "ec5"],
                        ["lzs", "Oms", "lXJ", "5Fa", "3vM", "UhR", "NY4", "nsl", "BN8", "YiB"],
                        ["sGv", "J5E", "xlQ", "Gez", "lFU", "D2Z", "PO3", "o1V", "p97", "fEA"],
                        ["w57", "HT1", "92K", "CK4", "VCM", "rUl", "GnB", "QV3", "jj5", "x5z"],
                        ["CfR", "KXf", "DUs", "I8G", "CxI", "HLe", "UFK", "1Fi", "XYB", "PWl"],
                        ["6lS", "tlp", "z6C", "ddZ", "Owr", "pj3", "VYh", "oLX", "gZw", "LEn"]
                    ]
                },
                {
                    ruleLeng: 10,
                    ruleStart: 0,
                    ruleSize: 9,
                    ruleSpostion: 1,
                    ruleStrNum: 3,
                    ruleArry: [
                        ["FWh", "qwd", "X8V", "5aF", "l3A", "7Vl", "oKO", "ICN", "6pu", "uQo"],
                        ["qUR", "BMa", "IfA", "Lrf", "4KR", "Mcr", "9ss", "c1U", "3EL", "6HF"],
                        ["y3h", "1Uf", "tDs", "xMj", "Wmm", "iqw", "h53", "JOb", "QPm", "ki8"],
                        ["g9S", "Ifp", "aUv", "QWI", "MCr", "4ph", "Ua9", "PEN", "hmU", "rFJ"],
                        ["dSM", "fJS", "SoJ", "7mF", "VNe", "wxS", "Dsr", "3ft", "4Z2", "vAC"],
                        ["n16", "EUT", "Xcs", "cIE", "UMM", "eBp", "Avw", "51g", "wqd", "yg0"],
                        ["DHH", "F6K", "VX9", "Exx", "o4H", "YqC", "8CZ", "IVU", "OqE", "Pgm"],
                        ["62E", "DA9", "ayo", "D1V", "Wjk", "zYz", "Vx9", "CP2", "lM0", "nEM"],
                        ["AuO", "f35", "824", "6oh", "ASt", "Hbv", "D7D", "P5D", "3vt", "dmi"],
                        ["IHn", "UVf", "kOq", "pD0", "8sP", "Vlv", "jfw", "okp", "fR0", "32k"]
                    ]
                },
                {
                    ruleLeng: 10,
                    ruleStart: 1,
                    ruleSize: 0,
                    ruleSpostion: 2,
                    ruleStrNum: 3,
                    ruleArry: [
                        ["7wx", "Ffp", "C1b", "M12", "Fke", "TI7", "IPk", "Llt", "Nkf", "QKM"],
                        ["nHy", "nnn", "WTp", "iNH", "O8b", "7RG", "1LX", "0Kp", "9x8", "Ri7"],
                        ["kzt", "KrW", "xN4", "InP", "1Zs", "wc6", "p3K", "k5x", "OFc", "Atx"],
                        ["6Dg", "bl7", "031", "X1q", "5f4", "YC1", "mhd", "1am", "gYx", "mec"],
                        ["Cvo", "BuV", "NRN", "zHc", "zNx", "IRr", "402", "lCs", "HDo", "2o5"],
                        ["b63", "xTB", "xI4", "Lt6", "lxi", "Wxx", "pBH", "SU0", "ZmI", "Jzc"],
                        ["J9J", "GdT", "ssy", "OBX", "ZDv", "HwE", "qsj", "PLz", "UIf", "sgH"],
                        ["Ifp", "MMo", "dNU", "2Jq", "kw8", "IDd", "a5E", "E2w", "6DA", "vN0"],
                        ["JXa", "6at", "yVU", "oS0", "y5j", "SC2", "OpQ", "UHe", "tPY", "1zT"],
                        ["B94", "kiV", "u5L", "bMM", "mg0", "GEx", "RCg", "7Y3", "MA0", "3S2"]
                    ]
                },
                {
                    ruleLeng: 10,
                    ruleStart: 9,
                    ruleSize: 0,
                    ruleSpostion: 1,
                    ruleStrNum: 3,
                    ruleArry: [
                        ["2JO", "dbH", "bN3", "Xmf", "d0O", "oiU", "GHx", "Wkx", "xmh", "PrP"],
                        ["mNf", "rX1", "of6", "fE0", "vLc", "0hY", "y2L", "F3v", "GYe", "VyZ"],
                        ["0OC", "1pP", "ZAr", "6fP", "aus", "a8Q", "LIW", "eE4", "YfF", "zHo"],
                        ["KZK", "UEY", "Haj", "CO1", "yJ6", "KgF", "u2o", "X7u", "mds", "FWS"],
                        ["8GL", "Exa", "znJ", "GCl", "Uds", "0ze", "YFC", "U82", "PW4", "XIG"],
                        ["gFL", "f9I", "mOb", "hB8", "jmD", "eyF", "A67", "yN4", "BO5", "nXr"],
                        ["mMg", "wbs", "VFX", "xOa", "ctR", "6Xi", "mrz", "w7V", "JaM", "9Ha"],
                        ["plr", "R2u", "VqP", "UNe", "rFx", "4NN", "Y51", "pY9", "HrQ", "LHs"],
                        ["O63", "qEr", "tzW", "OZI", "X2Y", "sbw", "GhY", "JUL", "nNO", "VNx"],
                        ["9PG", "hkC", "HWT", "xeN", "rRp", "Rga", "B3A", "asa", "7Nj", "Gif"]
                    ]
                },
                {
                    ruleLeng: 10,
                    ruleStart: 9,
                    ruleSize: 8,
                    ruleSpostion: 0,
                    ruleStrNum: 3,
                    ruleArry: [
                        ["qse", "DeZ", "ow3", "CWT", "IVb", "Isq", "0TD", "ZBw", "b44", "F4m"],
                        ["cou", "oJf", "EfH", "ihe", "hvE", "ZDg", "H3v", "Fs5", "Vme", "bxy"],
                        ["dOS", "jRc", "aeS", "sJt", "Dgf", "JDt", "aju", "UbO", "Eex", "Vdr"],
                        ["Dsp", "Lgz", "xQE", "lSW", "6Ar", "usA", "tza", "d9O", "hTF", "aNt"],
                        ["zhe", "DpE", "xx8", "pXu", "tgO", "9lN", "Gx2", "GDd", "631", "M23"],
                        ["sqt", "Zyo", "G5k", "n70", "HZb", "Ypp", "lfT", "VZC", "s4K", "u6J"],
                        ["NCp", "N0U", "3zN", "HI0", "xpV", "lfF", "6Bl", "Cz4", "O1e", "hzj"],
                        ["ePi", "Wny", "clx", "EaS", "sOR", "BCF", "3kv", "6PL", "IdT", "wAV"],
                        ["MBN", "EPs", "xtk", "tPj", "ieu", "TYh", "x1Y", "wZa", "RzN", "4Sq"],
                        ["eFG", "sIi", "ch7", "WFZ", "I2L", "4ia", "sd3", "WjB", "aEh", "hdh"]
                    ]
                },
                {
                    ruleLeng: 10,
                    ruleStart: 8,
                    ruleSize: 9,
                    ruleSpostion: 0,
                    ruleStrNum: 3,
                    ruleArry: [
                        ["vd4", "e7K", "sgE", "j7k", "re2", "now", "CSx", "ktR", "eyO", "eVN"],
                        ["OqM", "3Yp", "Y0L", "O4Y", "2MR", "umf", "iKy", "aDg", "9E8", "DFR"],
                        ["qp1", "nJo", "wYw", "z30", "aon", "Szo", "KW0", "csp", "tOc", "Cep"],
                        ["BnM", "6cb", "0ua", "Ovo", "cNk", "RHS", "uFP", "RGN", "qWu", "Fuj"],
                        ["uQb", "JZM", "oqq", "gr8", "CSA", "4bB", "bz9", "aZC", "cDv", "CJf"],
                        ["UCk", "oHl", "OaX", "smD", "UQ6", "l2m", "sHz", "kUd", "3sZ", "Upw"],
                        ["Cto", "S7v", "KCi", "ef1", "niq", "86f", "uJQ", "YLR", "FiW", "mTt"],
                        ["6ik", "7AY", "Nyh", "Jwx", "nms", "lYA", "lpI", "wAu", "dD3", "2Y1"],
                        ["Pw2", "xT6", "YSw", "xFq", "9ji", "vM3", "TKX", "ue7", "Kq3", "Yp9"],
                        ["UrQ", "PLg", "XJg", "g80", "4Dc", "Qtl", "EY3", "8a5", "DPc", "D6G"]
                    ]
                }
            ];
            this.rule = this.ruleAllArry[i];
        }
        //得到随机数;
        getRandom(num) {
            return parseInt(Math.random() * num);
        }
        //加密;
        encryption(num) {
            let str = '';
            let newNum = '';
            let num1 = '' + num;
            let numLeng = num1.length;
            let numStr = '';
            let strLeng = this.rule.ruleLeng - 2;
            let strFree = strLeng - numLeng;
            let startStr = '';
            let lastStr = '';
            let strPositon = parseInt(Math.random() * strFree);
            let lsatNum = strFree - strPositon;
            for (let s = 0; s < strPositon; s++) {
                startStr += this.getRandom(9);
            }
            for (let l = 0; l < lsatNum; l++) {
                lastStr += this.getRandom(9);
            }
            numStr = startStr + num + lastStr;
            if (this.rule.ruleStart == '0') {
                newNum += strPositon + this.rule.ruleSpostion;
                if (this.rule.ruleSize == '1') {
                    newNum = newNum + numLeng + numStr;
                } else if (this.rule.ruleSize == '9') {
                    newNum = newNum + numStr + numLeng;
                }
            } else if (this.rule.ruleStart == '1') {
                let numPostion = strPositon + this.rule.ruleSpostion;
                if (this.rule.ruleSize == '0') {
                    newNum = '' + numLeng + numPostion + numStr;
                }
            } else if (this.rule.ruleStart == '9') {
                let numPostion = strPositon + this.rule.ruleSpostion;
                if (this.rule.ruleSize == '0') {
                    newNum = newNum + numLeng + numStr + numPostion;
                } else if (this.rule.ruleSize == '8') {
                    newNum = newNum + numStr + numLeng + numPostion;
                }
            } else if (this.rule.ruleStart == '8' && this.rule.ruleSize == '9') {
                let numPostion = strPositon + this.rule.ruleSpostion;
                newNum += numStr + numPostion + numLeng;
            }
            let string = "" + newNum;
            let leng = string.length;
            let strArry = string.split('');
            //console.log(string);
            for (let i = 0; i < leng; i++) {
                let n = strArry[i];
                let arrNum = this.rule.ruleArry[n];
                let arrLeng = arrNum.length - 1;
                str += arrNum[this.getRandom(arrLeng)];
            }
            // console.log(str,str.length);
            return str;
        }
    }
    const jiamiBfun = new Mdbox5(_mayNum);
    class Game {
        ascale = window.innerWidth / 750;
        aw: number = window.innerWidth / this.ascale;
        ah: number = window.innerHeight / this.ascale;
        height1: number = this.ah + 300;
        canClickGameRun: boolean = true;
        speed: number = 0;
        aSpeed: number = 5;
        minSpeed: number = 0;
        maxSpeed: number = 50;
        count: number = 0;
        maxCount: number = 100;
        time: number = 45;
        startTime: number = 0;
        slowSpeed: number = 1;
        app: any;
        target: any;
        distance: number = 0;
        canPlay: boolean = false;
        dx0: number = 100;
        dx1: number = -100;
        defScale: number = 0.3;
        dxMnum: number = 200;
        dxSpeed: number = 200 / this.height1;
        dxSacleSpeed: number = (1 - this.defScale) / this.height1;
        leftBox: any;
        rightBox: any;
        leftCanAdd: boolean = true;
        righrCanAdd: boolean = true;
        backStage: any;
        backStage1: any;
        leftArry: any = [];
        rightArry: any = [];
        boyBox: any;
        canAddSpeed: boolean = false;
        clickNum: number = 0;
        boyName: any = ['img24', 'img25'];
        propName: any = ['img18', 'img19', 'img20', 'img21', 'img18', 'img19', 'img20', 'img21']
        boyNum: number = 0;
        boyCount: number = 0;
        boyMaxCount: number = 100;
        boyLength: number = this.boyName.length;
        gameBox: any;
        boxw: number = 250;
        boxh: number = 200;
        sboxw: number = 320;
        sboxh: number = 200;
        timer: any = null;
        pCount: any = 0;
        c_points: any = [];
        ropeLength: any = 900 / 20;
        constructor(target) {
            this.leftCanAdd = true;
            this.righrCanAdd = true;
            this.target = typeof target == 'string' ? document.querySelector(target) : target;
            this.init();
        }
        init() {
            this.createStage();
            this.loaderGameImg();
            this.reSet();
            this.resize();
            this.bindEvent();
        }
        createStage() {
            this.app = new PIXI.Application({
                width: this.aw,         // default: 800
                height: this.ah,        // default: 600
                antialias: true,    // default: false
                transparent: true, // default: false
                resolution: 1       // default: 1
            }
            );
            this.backStage = new PIXI.Container({
                width: this.aw,
                height: 1600,
                x: 0,
                y: 0
            });
            this.backStage.y = this.ah - 1600;
            this.app.stage.addChild(this.backStage);
            this.backStage1 = new PIXI.Container({
                width: this.aw,
                height: 1600,
                x: 0,
                y: 0
            });
            this.backStage1.y = this.ah - 1600;
            this.app.stage.addChild(this.backStage1);
            const boxW: number = 250;
            // console.log(this.app);
            this.target.append(this.app.view);
            this.leftBox = new PIXI.Container({
                width: boxW,
                height: this.height1,
                x: 0,
                y: -300
            });
            this.leftBox.x = -30;
            this.leftBox.y = -300;
            this.rightBox = new PIXI.Container({
                width: boxW,
                height: this.height1,
                x: 500,
                y: -300
            });
            this.rightBox.x = 540;
            this.rightBox.y = -300;
            this.app.stage.addChild(this.leftBox);
            this.app.stage.addChild(this.rightBox);
            let top = this.ah - 683 - 100;
            console.log(top);
            this.boyBox = new PIXI.Container({
                width: 414,
                height: 683,
                x: 203,
                y: top
            });
            this.boyBox.x = (750 - 414) / 2;
            this.boyBox.y = top;
            this.app.stage.addChild(this.boyBox);
            this.gameBox = new PIXI.Container({
                width: this.aw,
                height: this.ah,
                x: 0,
                y: 0
            });

            this.app.stage.addChild(this.gameBox);


        }
        createSprite(name, n = 0) {
            if (n) {
                console.log(name);
            }
            return new PIXI.Sprite(PIXI.loader.resources[name].texture);
        }
        initGame() {
            let buttonW = 161;
            let buttonH = 125;
            let buttonX = 60;
            let buttonY = this.ah - buttonH - 80;
            this.pCount = 0;
            this.c_points = [];
            for (var i = 0; i < 20; i++) {
                this.c_points.push(new PIXI.Point(i * this.ropeLength, 0));
            }
            let src = base_url + 'bg2.jpg';
            let strip = new PIXI.mesh.Rope(PIXI.Texture.fromImage(src), this.c_points);
            strip.x = -450;
            this.leftBox.removeChildren();
            this.rightBox.removeChildren();
            this.boyBox.removeChildren();
            this.gameBox.removeChildren();
            this.backStage.removeChildren();
            // this.backStage.scale.set(this.aw * 0.5 / this.ah);
            this.backStage.position.y = this.ah * 0.5;
            this.backStage.position.x = 400;
            this.backStage1.removeChildren();
            //let bg2 = this.createSprite("bg2");
            this.backStage.addChild(strip);
            let boy = this.createSprite('img24');
            //console.log(PIXI.Texture,2333);
            // let texture = PIXI.TextureCache("../assets/images/img14.png");
            //  let texture =PIXI.loader.resources['img24'].texture;
            //   let rectangle = new PIXI.Rectangle(20, 128, 300, 264);
            //   texture.frame = rectangle;
            //   boy = new PIXI.Sprite(texture);
            //boy.y = -600;
            console.log();
            // this.boyBox.transform.scale.x = 0.2;
            // this.boyBox.transform.scale.y = 0.2;
            this.boyBox.addChild(boy);
            let leftButton = this.createSprite("img22");
            let rightButton = this.createSprite("img23");
            leftButton.x = buttonX;
            rightButton.x = this.aw - buttonW - buttonX;
            leftButton.y = buttonY;
            rightButton.y = buttonY;
            leftButton.buttonMode = true;
            leftButton.interactive = true;
            rightButton.buttonMode = true;
            rightButton.interactive = true;
            this.gameBox.addChild(leftButton);
            this.gameBox.addChild(rightButton);
            // this.gameBox.on("pointertap",this.boxBindClick.bind(this));
            leftButton.on("pointertap", this.leftButtonClick.bind(this));
            rightButton.on("pointertap", this.rightButtonClick.bind(this));
            $(".disBoxCont p").html(0);
            $(".timeOutBox p").html(`${this.time}.00`);
        }
        boxBindClick(e) {
            //console.log(1323,e);
            let touchLength = e.changedTouches.length;
            if (touchLength == 1) {
                this.canClickGameRun = true;
            } else {
                this.canClickGameRun = false;
            }
        }
        leftButtonClick(e) {
            if (!this.canClickGameRun) {
                return false;
            }
            console.log("点击左边",this.leftCanAdd);
            let _this = this;
            if (this.leftCanAdd) {
                clearTimeout(this.timer);
                this.leftCanAdd = false;
                this.speed += this.aSpeed;
                this.clickNum++;
                this.righrCanAdd = true;
                this.canAddSpeed = true;
                this.boyNum = 0;
                _this.timer = setTimeout(() => {
                    _this.canAddSpeed = false;
                }, 200)
            }
        }
        rightButtonClick(e) {
            console.log("点击右边");
            if (!this.canClickGameRun) {
                return false;
            }
            let _this = this;
            if (this.righrCanAdd) {
                clearTimeout(this.timer);
                this.boyNum = 1;
                this.righrCanAdd = false;
                this.clickNum++;
                this.leftCanAdd = true;
                this.canAddSpeed = true;
                _this.timer = setTimeout(() => {
                    _this.canAddSpeed = false;
                }, 200)
            }
        }
        changeSpeed() {
            if (this.canAddSpeed) {
                // this.speed += this.aSpeed;
            } else {
                this.speed -= this.slowSpeed;
            }
            if (this.speed < this.minSpeed) {
                this.speed = this.minSpeed;
            }
            if (this.speed > this.maxSpeed) {
                this.speed = this.maxSpeed;
            }
            this.distance += this.speed;
            let disT = parseInt(this.distance / 100);
            $(".disBoxCont p").html(disT);
            //console.log(this.speed);
            // this.canAddSpeed = false;
        }
        boyChane() {
            // if(this.boyCount < this.boyMaxCount){
            //     this.boyCount += this.speed;
            // }else{
            //    if(this.boyNum < this.boyLength - 1){
            //        this.boyNum++;
            //    }else{
            //        this.boyNum = 0;
            //    }
            //    this.boyCount = 0;
            // }
            let name = this.boyName[this.boyNum];
            let boy = this.createSprite(name);
            this.boyBox.removeChildren();
            this.boyBox.addChild(boy);
        }
        //窗口改变
        resize() {
            window.addEventListener('resize', function () {
                this.reSet();
            }.bind(this))
        }
        reSet() {
            this.aw = window.innerWidth / this.ascale;
            this.ah = window.innerHeight / this.ascale > 600 ? window.innerHeight / this.ascale : 600;
            this.app.renderer.view.height = this.ah;
            this.height1 = this.ah + 300;
            this.boyBox.y = this.ah - 683 - 100;
        }
        resetGame() {
            this.distance = 0;
            this.speed = 5;
            this.count = 0;
            this.leftCanAdd = true;
            this.righrCanAdd = true;
            this.leftArry = [];
            this.rightArry = [];
            this.initGame();
        }
        getTime() {
            let date = new Date();
            return date.getTime();
        }
        //绑定事件;
        bindEvent() {
            let _this = this;
            $(".startButton").click(function () {
                _this.reSet();
                _this.initGame();
                isCanPlayGame(_this.canPlayGame);
            });
            $(".startButtonGame").click(function () {
                $(".gameTipsRule").hide();
                _this.gameStart();
            });
            $(".replayGame").click(function () {
                _this.resetGame();
                isCanPlayGame(_this.canPlayGame);
            });
            document.querySelector("#gameContainer").addEventListener('touchstart',
                this.boxBindClick.bind(this), false);
        }
        canPlayGame() {
            //console.log("可以开始游戏");

            $(".gameTipsRule").show();
            pagetab(1);

        }
        //创建道具;
        createLeftBox() {

            let length = this.leftArry.length;
            if (!length || this.leftArry[length - 1].y > 700) {
                this.leftArry.push(this.createBoxSprit(0));
            } else {
                if (!this.leftCanAdd) {
                    return false;
                }
                let y = this.leftArry[length - 1].y;
                if (y < 400) {
                    return false;
                }
                let m = parseInt(Math.random() * 100);
                if (m > 45 && m < 55) {
                    this.leftCanAdd = false;
                    let time = parseInt(Math.random() * 100 + 30);
                    setTimeout(() => {
                        this.leftCanAdd = true;
                    }, time);
                    return false;
                }
                this.leftArry.push(this.createBoxSprit(0));
            }
        }
        runBg() {
            this.count += 0.008;
            for (var i = 0; i < this.c_points.length; i++) {
                this.c_points[i].y = Math.sin((i * 0.15) + this.count) * 8;
                // this.c_points[i].x = i * this.ropeLength + Math.cos((i * 0.13) + this.count) * 14;
            }
        }
        createRightBox() {
            let length = this.rightArry.length;
            if (!length || this.rightArry[length - 1].y > 700) {
                this.rightArry.push(this.createBoxSprit(1));
            } else {
                if (!this.righrCanAdd) {
                    return false;
                }
                let y = this.rightArry[length - 1].y;
                if (y < 400) {
                    return false;
                }
                let m = parseInt(Math.random() * 100);
                if (m > 45 && m < 50) {
                    this.righrCanAdd = false;
                    let time = parseInt(Math.random() * 100 + 30)
                    setTimeout(() => {
                        this.righrCanAdd = true;
                    }, time)
                    return false;
                }
                this.rightArry.push(this.createBoxSprit(1));
            }
        }
        createBoxSprit(i) {
            let length = this.propName.length - 1;
            let obj: any = {};
            let name = this.propName[parseInt(Math.random() * length)];
            // obj.sprit = this.createSprite(name);
            obj.name = name;
            if (!i) {
                obj.x = this.dx0;
            } else {
                obj.x = this.dx1;
            }
            obj.y = 0;
            obj.w = this.sboxw;
            obj.h = this.sboxh;
            obj.scale = this.defScale;
            return obj;
        }
        //渲染两侧场景;
        renderLeftBox() {
            let length = this.leftArry.length;
            this.leftBox.removeChildren();
            if (!length) {
                return false;
            }
            for (let i = length - 1; i >= 0; i--) {
                let obj = this.leftArry[i];
                if (obj.y > this.height1) {
                    this.leftArry.splice(i, 1);
                    continue;
                }
                let box = new PIXI.Container({
                    width: this.boxw,
                    height: this.boxh,
                    x: obj.x,
                    y: obj.y
                });
                let zoom = obj.scale;
                let y = obj.y;
                // console.log(111,obj.scale,this.dxSacleSpeed,obj.y,this.dxSacleSpeed * obj.y)
                zoom = y * this.dxSacleSpeed + obj.scale;
                if (zoom > 1) {
                    zoom = 1;
                }
                //obj.scale = zoom;
                // obj.scale = obj.scale + parseInt(this.dxSacleSpeed * obj.y*100)/100;
                //  return  false;
                let dx = obj.x - this.dxSpeed * obj.y;
                let w = obj.w * zoom;
                let h = obj.h * zoom;
                let x = (this.boxw - w) / 2;
                let y = (this.boxh - h) / 2;
                // console.log(obj.scale,this.dxSacleSpeed);
                let sprit = this.createSprite(obj.name);
                // console.log(22233,x,y,w,h);
                sprit.x = x;
                sprit.y = y;
                sprit.width = w;
                sprit.height = h;
                box.y = obj.y;
                box.x = dx;
                box.addChild(sprit);
                this.leftBox.addChild(box);
                obj.y += this.speed;
            }
        }
        renderRightBox() {
            let length = this.rightArry.length;
            this.rightBox.removeChildren();
            if (!length) {
                return false;
            }
            for (let i = length - 1; i >= 0; i--) {
                let obj = this.rightArry[i];
                if (obj.y > this.height1) {
                    this.rightArry.splice(i, 1);
                    continue;
                }
                let box = new PIXI.Container({
                    width: this.boxw,
                    height: this.boxh,
                    x: obj.x,
                    y: obj.y
                });
                let zoom = obj.scale;
                let y = obj.y;
                zoom = y * this.dxSacleSpeed + obj.scale;
                if (zoom > 1) {
                    zoom = 1;
                }
                let dx = obj.x + this.dxSpeed * obj.y;
                let w = obj.w * zoom;
                let h = obj.h * zoom;
                let x = (this.boxw - w) / 2;
                let y = (this.boxh - h) / 2;
                let sprit = this.createSprite(obj.name);
                sprit.x = x;
                sprit.y = y;
                sprit.width = w;
                sprit.height = h;
                box.y = obj.y;
                box.x = dx;
                box.addChild(sprit);
                this.rightBox.addChild(box);
                obj.y += this.speed;
            }
        }
        //开始游戏
        gameStart() {
            this.startTime = this.getTime();
            this.canPlay = true;
        }
        //倒计时;
        timeOut() {
            let dtime = this.getTime() - this.startTime;
            let allTime = this.time * 1000 - dtime;
            let time = parseInt(allTime / 10);
            if (time <= 0 || dtime > 60 * 1000) {
                this.canPlay = false;
                this.gameOver()
            }
            if (time <= 0) {
                time = 0;
            }
            let txtTime = '' + time;
            if (time < 10) {
                txtTime = "000" + time;
            } else if (time < 100) {
                txtTime = '00' + time;
            } else if (time < 1000) {
                txtTime = '0' + time;
            }
            let [a, b = 0, c = 0, d = 0] = txtTime.split('');
            let num = '' + a + b + '.' + c + d;
            $(".timeOutBox p").html(num);

        }
        //游戏结束;
        gameOver() {
            // console.log('游戏结束');
            let obj: any = {};
            obj.score = jiamiBfun.encryption(parseInt(this.distance / 100));
            obj.clickNum = jiamiBfun.encryption(this.clickNum);
            gameOver(obj, this.overGamePage);
        }
        overGamePage() {
            pagetab(2);
        }
        gameLoop(delta) {
            if (this.canPlay) {
                this.reSet();
                this.timeOut();
                this.changeSpeed();
                this.boyChane();
                this.createLeftBox();
                this.createRightBox();
                this.renderLeftBox();
                this.renderRightBox();
                this.runBg();
            }
        }
        //预加载；
        loaderGameImg() {
            PIXI.loader
                .add(imgJson)
                .on("progress", this.loadProgressHandler)
                .load(this.finshLoad.bind(this));
        }
        loadProgressHandler(loader, resource): void {
            let percent = parseInt(loader.progress);
            $(".jindBox p").width(`${loader.progress}%`);
            //  let target:any = document.querySelector('.loadNum span');
            // target.innerHTML = percent;
            // console.log(percent)
        }
        finshLoad(): void {
            //document.querySelector(".loadPage").style.display = 'none';
            this.initGame();
            let _this = this;
            this.app.ticker.add(function (delta) {
                _this.gameLoop(delta)
            });
            setTimeout(() => {
                // console.log(this);
                this.loadComplete();

            }, 200)
        }
        loadComplete() {
            //return false;
            $(".loadPage").fadeOut(400);
            $(".page").eq(1).addClass("curt").siblings().hide();
            setTimeout(() => {

            }, 400);
        }
    }
    let game = new Game('#gameContainer');
})();
